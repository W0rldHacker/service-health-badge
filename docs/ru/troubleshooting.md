# Troubleshooting

[English version](./en/troubleshooting.md)

## CORS ошибка в консоли

- Проверьте заголовки для `GET /health` и preflight `OPTIONS`: см. [Backend CORS Checklist](./backend-cors-checklist.md).

## Статус «залипает», данные устаревают

- Убедитесь, что сервер отвечает `Cache-Control: no-store`.
- Проверьте, не кэширует ли CDN/прокси путь `/health`.

## `unknown` после успешного ответа

- Ответ не JSON или поле `status` невалидно. Раздел логики парсинга: `status` ∈ {`ok`,`degraded`,`down`} иначе `unknown`.

## Частые `down` при большой задержке

- Увеличьте `timeout` или уменьшите нагрузку на сервер. При тайм‑ауте запрос прерывается и генерируется `health-error`.

## `offline` сразу после монтирования

- Браузер считает соединение офлайн (`navigator.onLine === false`). Компонент не опрашивает сеть и показывает `offline` до восстановления.

## Не показывается задержка

- Параметр виден только в `variant='badge'` и если `show-latency !== 'false'`.
- Источник — `timings.total_ms` из ответа или измеренная RTT. Отсутствие ответа/ошибка ⇒ задержка может быть неизвестна.

## «Дребезг» анонсов/визуала

- Изменения визуально и в анонсах дебаунсятся ~500 мс. Это штатно и улучшает UX скринридеров.
